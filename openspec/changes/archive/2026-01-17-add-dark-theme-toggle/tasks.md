# Задачи: Добавление переключателя темной темы

## Порядок выполнения

1. Создать ThemeProvider компонент с контекстом темы
2. Реализовать ThemeToggle компонент
3. Интегрировать компонент в шапку сайта
4. Обеспечить сохранение настроек в localStorage
5. Протестировать переключение тем
6. Обеспечить доступность компонента
7. Добавить документацию

## Подробные задачи

### 1. Создание ThemeProvider
- [ ] Создать файл `/src/components/common/ThemeProvider.tsx`
- [ ] Реализовать ThemeContext с типами TypeScript
- [ ] Добавить логику определения начальной темы
- [ ] Реализовать функции toggleTheme и setTheme
- [ ] Обработать гидратацию на клиенте
- [ ] Добавить обновление класса .dark на html элементе

### 2. Создание ThemeToggle
- [ ] Создать файл `/src/components/common/ThemeToggle.tsx`
- [ ] Использовать Sun и Moon иконки из lucide-react
- [ ] Подключить к ThemeContext
- [ ] Реализовать визуальное отображение текущей темы
- [ ] Добавить обработчики кликов
- [ ] Обеспечить доступность (ARIA атрибуты, клавиатурная навигация)

### 3. Интеграция с интерфейсом
- [ ] Обернуть приложение в ThemeProvider
- [ ] Добавить ThemeToggle в шапку сайта (Navigation или Header)
- [ ] Стилизовать компонент в соответствии с дизайном сайта
- [ ] Обеспечить адаптивность компонента

### 4. Логика сохранения настроек
- [ ] Реализовать сохранение темы в localStorage
- [ ] Восстановление темы при загрузке приложения
- [ ] Обработка системных предпочтений (prefers-color-scheme)

### 5. Тестирование
- [ ] Протестировать переключение тем вручную
- [ ] Проверить сохранение настроек между сессиями
- [ ] Проверить корректность отображения в обеих темах
- [ ] Проверить отсутствие ошибок гидратации

### 6. Доступность
- [ ] Проверить работу с клавиатуры
- [ ] Добавить ARIA атрибуты
- [ ] Проверить контрастность в обеих темах
- [ ] Обеспечить корректное объявление для скринридеров

### 7. Документация
- [ ] Обновить документацию по компоненту
- [ ] Добавить JSDoc комментарии к функциям
- [ ] Обновить README, если применимо

## Зависимости

- Задача 2 зависит от завершения задачи 1
- Задача 3 зависит от завершения задач 1 и 2
- Задачи 5-6 могут выполняться параллельно после завершения задач 1-3

## Критерии завершения

- Компонент переключения темы интегрирован в интерфейс
- Тема корректно переключается между светлой и темной
- Выбор темы сохраняется между сессиями
- Компонент доступен для пользователей с ограниченными возможностями
- Нет ошибок гидратации в Next.js приложении
- Все тесты проходят успешно