# Design Document: Добавление переключателя темной темы

## Архитектурные решения

### Состояние темы

Для управления состоянием темы будет использован React Context API с возможностью переключения между светлой и темной темами. Состояние будет сохраняться в localStorage для сохранения выбора пользователя между сессиями.

### Компонент ThemeToggle

Компонент будет реализован как:

- Чистый React-компонент с использованием TypeScript
- Использование иконок для визуального обозначения текущей темы
- Поддержка клавиатурной навигации и скринридера
- Сохранение выбора в localStorage
- Применение класса `.dark` к элементу `<html>` для активации темной темы

### Theme Provider

Будет создан ThemeProvider, который:

- Определяет начальную тему на основе системных настроек или сохраненного значения
- Предоставляет контекст для других компонентов
- Обрабатывает переключение темы
- Обновляет DOM напрямую для немедленного эффекта

## Технические детали

### Структура файлов

```
src/
  components/
    common/
      ThemeProvider.tsx    # Context Provider для управления темой
      ThemeToggle.tsx      # Компонент переключателя темы
```

### API компонента

ThemeProvider будет предоставлять следующий интерфейс:

```typescript
interface ThemeContextType {
  theme: 'light' | 'dark';
  toggleTheme: () => void;
  setTheme: (theme: 'light' | 'dark') => void;
}
```

### Интеграция с существующим кодом

- Компонент будет интегрирован в шапку сайта (Header)
- Будет использоваться существующая CSS-система тем из `globals.css`
- Сохранится совместимость с уже реализованными темными стилями

## Доступность

- Компонент будет иметь соответствующие ARIA-атрибуты
- Поддержка клавиатурной навигации (Tab, Enter, Space)
- Корректное объявление текущего состояния для скринридеров

## Соображения по производительности

- Минимальное количество перерисовок
- Использование мемоизации при необходимости
- Оптимизация обработчиков событий